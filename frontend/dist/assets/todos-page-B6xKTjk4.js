import{i as le,s as z,g as T,h as ue,j as ee,k as P,l as ce,m as U,n as te,p as J,q,u as ne,x as de,y as fe,z as pe,A as j,B as me,C as V,_ as he,c as I,o as $,a as m,t as G,d as ge,w as ve,v as ye,D as we,F as Se,E as be,G as X}from"./index-BqW0q5WO.js";function ke(e){return fe()?(pe(e),!0):!1}const H=new WeakMap,Ce=(...e)=>{var t;const n=e[0],o=(t=q())==null?void 0:t.proxy;if(o==null&&!ne())throw new Error("injectLocal must be called in setup");return o&&H.has(o)&&n in H.get(o)?H.get(o)[n]:de(...e)},Te=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const je=Object.prototype.toString,Ae=e=>je.call(e)==="[object Object]",_e=()=>{};function oe(...e){if(e.length!==1)return ue(...e);const t=e[0];return typeof t=="function"?ee(ce(()=>({get:t,set:_e}))):P(t)}function Ee(e,t){function n(...o){return new Promise((s,c)=>{Promise.resolve(e(()=>t.apply(this,o),{fn:t,thisArg:this,args:o})).then(s).catch(c)})}return n}const ae=e=>e();function Me(e=ae,t={}){const{initialState:n="active"}=t,o=oe(n==="active");function s(){o.value=!1}function c(){o.value=!0}const u=(...a)=>{o.value&&e(...a)};return{isActive:ee(o),pause:s,resume:c,eventFilter:u}}function Y(e){return e.endsWith("rem")?Number.parseFloat(e)*16:Number.parseFloat(e)}function K(e){return Array.isArray(e)?e:[e]}function De(e){return q()}function Oe(e,t,n={}){const{eventFilter:o=ae,...s}=n;return J(e,Ee(o,t),s)}function Ne(e,t,n={}){const{eventFilter:o,initialState:s="active",...c}=n,{eventFilter:u,pause:a,resume:l,isActive:p}=Me(o,{initialState:s});return{stop:Oe(e,t,{...c,eventFilter:u}),pause:a,resume:l,isActive:p}}function se(e,t=!0,n){De()?U(e,n):t?e():te(e)}function xe(e=!1,t={}){const{truthyValue:n=!0,falsyValue:o=!1}=t,s=le(e),c=z(e);function u(a){if(arguments.length)return c.value=a,c.value;{const l=T(n);return c.value=c.value===l?T(o):l,c.value}}return s?u:[c,u]}function ze(e,t,n){return J(e,t,{...n,immediate:!0})}const F=Te?window:void 0;function re(e){var t;const n=T(e);return(t=n?.$el)!=null?t:n}function Q(...e){const t=[],n=()=>{t.forEach(a=>a()),t.length=0},o=(a,l,p,d)=>(a.addEventListener(l,p,d),()=>a.removeEventListener(l,p,d)),s=j(()=>{const a=K(T(e[0])).filter(l=>l!=null);return a.every(l=>typeof l!="string")?a:void 0}),c=ze(()=>{var a,l;return[(l=(a=s.value)==null?void 0:a.map(p=>re(p)))!=null?l:[F].filter(p=>p!=null),K(T(s.value?e[1]:e[0])),K(V(s.value?e[2]:e[1])),T(s.value?e[3]:e[2])]},([a,l,p,d])=>{if(n(),!a?.length||!l?.length||!p?.length)return;const i=Ae(d)?{...d}:d;t.push(...a.flatMap(f=>l.flatMap(h=>p.map(g=>o(f,h,g,i)))))},{flush:"post"}),u=()=>{c(),n()};return ke(n),u}function We(){const e=z(!1),t=q();return t&&U(()=>{e.value=!0},t),e}function Le(e){const t=We();return j(()=>(t.value,!!e()))}const Fe=Symbol("vueuse-ssr-width");function Ie(){const e=ne()?Ce(Fe,null):null;return typeof e=="number"?e:void 0}function $e(e,t={}){const{window:n=F,ssrWidth:o=Ie()}=t,s=Le(()=>n&&"matchMedia"in n&&typeof n.matchMedia=="function"),c=z(typeof o=="number"),u=z(),a=z(!1),l=p=>{a.value=p.matches};return me(()=>{if(c.value){c.value=!s.value;const p=T(e).split(",");a.value=p.some(d=>{const i=d.includes("not all"),f=d.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),h=d.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let g=!!(f||h);return f&&g&&(g=o>=Y(f[1])),h&&g&&(g=o<=Y(h[1])),i?!g:g});return}s.value&&(u.value=n.matchMedia(T(e)),a.value=u.value.matches)}),Q(u,"change",l,{passive:!0}),j(()=>a.value)}const B=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},R="__vueuse_ssr_handlers__",Be=Re();function Re(){return R in B||(B[R]=B[R]||{}),B[R]}function ie(e,t){return Be[e]||t}function Ve(e){return $e("(prefers-color-scheme: dark)",e)}function Pe(e){return e==null?"any":e instanceof Set?"set":e instanceof Map?"map":e instanceof Date?"date":typeof e=="boolean"?"boolean":typeof e=="string"?"string":typeof e=="object"?"object":Number.isNaN(e)?"any":"number"}const Je={boolean:{read:e=>e==="true",write:e=>String(e)},object:{read:e=>JSON.parse(e),write:e=>JSON.stringify(e)},number:{read:e=>Number.parseFloat(e),write:e=>String(e)},any:{read:e=>e,write:e=>String(e)},string:{read:e=>e,write:e=>String(e)},map:{read:e=>new Map(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e.entries()))},set:{read:e=>new Set(JSON.parse(e)),write:e=>JSON.stringify(Array.from(e))},date:{read:e=>new Date(e),write:e=>e.toISOString()}},Z="vueuse-storage";function Ge(e,t,n,o={}){var s;const{flush:c="pre",deep:u=!0,listenToStorageChanges:a=!0,writeDefaults:l=!0,mergeDefaults:p=!1,shallow:d,window:i=F,eventFilter:f,onError:h=r=>{console.error(r)},initOnMounted:g}=o,w=(d?z:P)(typeof t=="function"?t():t),k=j(()=>T(e));if(!n)try{n=ie("getDefaultStorage",()=>{var r;return(r=F)==null?void 0:r.localStorage})()}catch(r){h(r)}if(!n)return w;const C=T(t),W=Pe(C),_=(s=o.serializer)!=null?s:Je[W],{pause:y,resume:A}=Ne(w,r=>E(r),{flush:c,deep:u,eventFilter:f});J(k,()=>S(),{flush:c});let O=!1;const N=r=>{g&&!O||S(r)},L=r=>{g&&!O||D(r)};i&&a&&(n instanceof Storage?Q(i,"storage",N,{passive:!0}):Q(i,Z,L)),g?se(()=>{O=!0,S()}):S();function x(r,v){if(i){const b={key:k.value,oldValue:r,newValue:v,storageArea:n};i.dispatchEvent(n instanceof Storage?new StorageEvent("storage",b):new CustomEvent(Z,{detail:b}))}}function E(r){try{const v=n.getItem(k.value);if(r==null)x(v,null),n.removeItem(k.value);else{const b=_.write(r);v!==b&&(n.setItem(k.value,b),x(v,b))}}catch(v){h(v)}}function M(r){const v=r?r.newValue:n.getItem(k.value);if(v==null)return l&&C!=null&&n.setItem(k.value,_.write(C)),C;if(!r&&p){const b=_.read(v);return typeof p=="function"?p(b,C):W==="object"&&!Array.isArray(b)?{...C,...b}:b}else return typeof v!="string"?v:_.read(v)}function S(r){if(!(r&&r.storageArea!==n)){if(r&&r.key==null){w.value=C;return}if(!(r&&r.key!==k.value)){y();try{const v=_.write(w.value);(r===void 0||r?.newValue!==v)&&(w.value=M(r))}catch(v){h(v)}finally{r?te(A):A()}}}}function D(r){S(r.detail)}return w}const He="*,*::before,*::after{-webkit-transition:none!important;-moz-transition:none!important;-o-transition:none!important;-ms-transition:none!important;transition:none!important}";function Ke(e={}){const{selector:t="html",attribute:n="class",initialValue:o="auto",window:s=F,storage:c,storageKey:u="vueuse-color-scheme",listenToStorageChanges:a=!0,storageRef:l,emitAuto:p,disableTransition:d=!0}=e,i={auto:"",light:"light",dark:"dark",...e.modes||{}},f=Ve({window:s}),h=j(()=>f.value?"dark":"light"),g=l||(u==null?oe(o):Ge(u,o,c,{window:s,listenToStorageChanges:a})),w=j(()=>g.value==="auto"?h.value:g.value),k=ie("updateHTMLAttrs",(y,A,O)=>{const N=typeof y=="string"?s?.document.querySelector(y):re(y);if(!N)return;const L=new Set,x=new Set;let E=null;if(A==="class"){const S=O.split(/\s/g);Object.values(i).flatMap(D=>(D||"").split(/\s/g)).filter(Boolean).forEach(D=>{S.includes(D)?L.add(D):x.add(D)})}else E={key:A,value:O};if(L.size===0&&x.size===0&&E===null)return;let M;d&&(M=s.document.createElement("style"),M.appendChild(document.createTextNode(He)),s.document.head.appendChild(M));for(const S of L)N.classList.add(S);for(const S of x)N.classList.remove(S);E&&N.setAttribute(E.key,E.value),d&&(s.getComputedStyle(M).opacity,document.head.removeChild(M))});function C(y){var A;k(t,n,(A=i[y])!=null?A:y)}function W(y){e.onChanged?e.onChanged(y,C):C(y)}J(w,W,{flush:"post",immediate:!0}),se(()=>W(w.value));const _=j({get(){return p?g.value:w.value},set(y){g.value=y}});return Object.assign(_,{store:g,system:h,state:w})}function Qe(e={}){const{valueDark:t="dark",valueLight:n=""}=e,o=Ke({...e,onChanged:(u,a)=>{var l;e.onChanged?(l=e.onChanged)==null||l.call(e,u==="dark",a,u):a(u)},modes:{dark:t,light:n}}),s=j(()=>o.system.value);return j({get(){return o.value==="dark"},set(u){const a=u?"dark":"light";s.value===a?o.value="auto":o.value=a}})}const Ue={class:"d-grid gap-2 d-md-flex justify-content-md-end"},qe={class:"container-fluid"},Xe={class:"table table-striped mt-3"},Ye={key:0},Ze=["checked","disabled","onChange"],et=["onClick"],tt={__name:"todos-page",setup(e){const t=Qe(),n=xe(t),o=P([]),s=P(""),c=()=>{localStorage.removeItem("token"),localStorage.removeItem("user_id"),window.location.href="/login"},u=async()=>{const d=localStorage.getItem("token"),i=await fetch(`http://to-do-t23j.onrender.com/api/todoslist/${localStorage.getItem("user_id")}`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`}});o.value=await i.json(),console.log(o.value)},a=async()=>{const d=localStorage.getItem("token");if(s.value.trim()==="")return;const f=await(await fetch(`http://to-do-t23j.onrender.com/api/todoslist/${localStorage.getItem("user_id")}`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({name:s.value,status:"pending"})})).json();alert(f.message),s.value="",await u()},l=async d=>{const i=localStorage.getItem("token"),h=await(await fetch(`http://to-do-t23j.onrender.com/api/todoitem/${d.tid}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`},body:JSON.stringify({status:"completed"})})).json();alert(h.message),await u()},p=async d=>{const i=localStorage.getItem("token"),h=await(await fetch(`http://to-do-t23j.onrender.com/api/todoitem/${d.tid}`,{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i}`}})).json();alert(h.message),await u()};return U(()=>{u()}),(d,i)=>($(),I("div",{class:X(["todos-page",{dark:V(t)}])},[i[5]||(i[5]=m("h1",null,"Todo List",-1)),m("div",Ue,[m("button",{onClick:i[0]||(i[0]=f=>V(n)()),class:"btn btn-primary me-md-2"}," Toggle "+G(V(t)?"Light":"Dark")+" MOde ",1),m("button",{onClick:c,class:"btn btn-primary"},"signout")]),m("div",qe,[m("form",{onSubmit:ge(a,["prevent"]),class:"d-flex gap-2"},[ve(m("input",{"onUpdate:modelValue":i[1]||(i[1]=f=>s.value=f),placeholder:"Add a new todo",class:"form-control"},null,512),[[ye,s.value]]),i[2]||(i[2]=m("button",{type:"submit",class:"btn btn-primary"},"Add",-1))],32),m("table",Xe,[i[4]||(i[4]=m("thead",null,[m("tr",null,[m("th",null,"#"),m("th",null,"Task"),m("th",null,"Status"),m("th",null,"Action")])],-1)),m("tbody",null,[o.value.length===0?($(),I("tr",Ye,[...i[3]||(i[3]=[m("td",{colspan:"4",class:"text-center text-muted"}," No todos yet! ",-1)])])):we("",!0),($(!0),I(Se,null,be(o.value,f=>($(),I("tr",{key:f.tid},[m("td",null,G(f.tid),1),m("td",null,[m("span",{class:X({"text-decoration-line-through text-muted":f.status==="completed"})},G(f.name),3)]),m("td",null,[m("input",{type:"checkbox",checked:f.status==="completed",disabled:f.status==="completed",onChange:h=>l(f)},null,40,Ze)]),m("td",null,[m("button",{onClick:h=>p(f),class:"btn btn-sm btn-danger"}," Remove ",8,et)])]))),128))])])])],2))}},ot=he(tt,[["__scopeId","data-v-9b0f13c7"]]);export{ot as default};
