import{_ as p,c as m,o as u,a as s,b as g,w as l,v as a,d as w,t as f,e as h,r as y,f as v}from"./index-Buz-k2BW.js";const S={data(){return{email:"",password:"",message:""}},methods:{async handleLogin(){try{console.log("Logging in with:",this.email,this.password);const i={email:this.email,password:this.password},e=await fetch("http://127.0.0.1:5000/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}),o=await e.json();e.ok?(this.message=`Welcome, ${o.user}`,localStorage.setItem("token",o.token),localStorage.setItem("user_id",o.user.id),o.user.role==="admin"?this.$router.push("/admin"):this.$router.push("/todoslist")):this.message=o.message}catch(i){console.error(i),this.message="Server error"}}}},b={class:"login"};function k(i,e,o,x,t,n){const d=y("router-link");return u(),m("div",b,[e[7]||(e[7]=s("h2",null,"Login",-1)),s("form",{onSubmit:e[2]||(e[2]=w((...r)=>n.handleLogin&&n.handleLogin(...r),["prevent"]))},[e[3]||(e[3]=s("label",{for:"email"},"Email",-1)),l(s("input",{"onUpdate:modelValue":e[0]||(e[0]=r=>t.email=r),type:"email",placeholder:"you@example.com",required:""},null,512),[[a,t.email]]),e[4]||(e[4]=s("label",{for:"password"},"Password",-1)),l(s("input",{"onUpdate:modelValue":e[1]||(e[1]=r=>t.password=r),type:"password",placeholder:"Password",required:""},null,512),[[a,t.password]]),e[5]||(e[5]=s("button",{type:"submit"},"Login",-1))],32),s("p",null,f(t.message),1),e[8]||(e[8]=s("p",null,"Don't have an account?",-1)),g(d,{to:"/signup"},{default:h(()=>[...e[6]||(e[6]=[v("Signup",-1)])]),_:1})])}const L=p(S,[["render",k],["__scopeId","data-v-cc591530"]]);export{L as default};
